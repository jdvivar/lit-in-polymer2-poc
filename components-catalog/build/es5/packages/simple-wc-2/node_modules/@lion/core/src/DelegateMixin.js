define(["exports","./dedupeMixin.js"],function(_exports,_dedupeMixin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.DelegateMixin=void 0;/* eslint-disable class-methods-use-this */ /**
 * # DelegateMixin
 * Forwards defined events, methods, properties and attributes to the defined target.
 *
 * @example
 * get delegations() {
 *   return {
 *     ...super.delegations,
 *     target: () => this.$id('button1'),
 *     events: ['click'],
 *     methods: ['click'],
 *     properties: ['disabled'],
 *     attributes: ['disabled'],
 *   };
 * }
 * render() {
 *   return html`
 *     <button id="button1">with delegation</button>
 *   `;
 * }
 *
 * @type {function()}
 * @polymerMixin
 * @mixinFunction
 */var DelegateMixin=(0,_dedupeMixin.dedupeMixin)(function(superclass){return(/*#__PURE__*/ // eslint-disable-next-line
function(_superclass){babelHelpers.inherits(DelegateMixin,_superclass);function DelegateMixin(){var _this;babelHelpers.classCallCheck(this,DelegateMixin);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(DelegateMixin).call(this));_this.__eventsQueue=[];_this.__propertiesQueue={};_this.__setupPropertyDelegation();return _this}/**
       * @returns {{target: null, events: Array, methods: Array, properties: Array, attributes: Array}}
       */babelHelpers.createClass(DelegateMixin,[{key:"connectedCallback",value:function connectedCallback(){if(babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"connectedCallback",this)){babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"connectedCallback",this).call(this)}this._connectDelegateMixin()}},{key:"updated",value:function updated(){for(var _babelHelpers$get,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}(_babelHelpers$get=babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"updated",this)).call.apply(_babelHelpers$get,[this].concat(args));this._connectDelegateMixin()}/**
       * @param {string} type
       * @param {Object} args
       */},{key:"addEventListener",value:function addEventListener(type){for(var delegatedEvents=this.delegations.events,_len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}if(-1<delegatedEvents.indexOf(type)){if(this.delegationTarget){var _this$delegationTarge;(_this$delegationTarge=this.delegationTarget).addEventListener.apply(_this$delegationTarge,[type].concat(args))}else{this.__eventsQueue.push({type:type,args:args})}}else{var _babelHelpers$get2;(_babelHelpers$get2=babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"addEventListener",this)).call.apply(_babelHelpers$get2,[this,type].concat(args))}}/**
       * @param {string} name
       * @param {string} value
       */},{key:"setAttribute",value:function setAttribute(name,value){var attributeNames=this.delegations.attributes;if(-1<attributeNames.indexOf(name)){if(this.delegationTarget){this.delegationTarget.setAttribute(name,value)}babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"removeAttribute",this).call(this,name)}else{babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"setAttribute",this).call(this,name,value)}}/**
       * @param {string} name
       */},{key:"removeAttribute",value:function removeAttribute(name){var attributeNames=this.delegations.attributes;if(-1<attributeNames.indexOf(name)){if(this.delegationTarget){this.delegationTarget.removeAttribute(name)}}babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"removeAttribute",this).call(this,name)}/**
       * @protected
       */},{key:"_connectDelegateMixin",value:function _connectDelegateMixin(){if(this.__connectedDelegateMixin)return;if(!this.delegationTarget){this.delegationTarget=this.delegations.target()}if(this.delegationTarget){this.__emptyEventListenerQueue();this.__emptyPropertiesQueue();this.__initialAttributeDelegation();this.__connectedDelegateMixin=!0}}/**
       * @private
       */},{key:"__setupPropertyDelegation",value:function __setupPropertyDelegation(){var _this2=this,propertyNames=this.delegations.properties.concat(this.delegations.methods);propertyNames.forEach(function(propertyName){Object.defineProperty(_this2,propertyName,{get:function get(){var target=this.delegationTarget;if(target){if("function"===typeof target[propertyName]){return target[propertyName].bind(target)}return target[propertyName]}if(this.__propertiesQueue[propertyName]){return this.__propertiesQueue[propertyName]}// This is the moment the attribute is not delegated (and thus removed) yet.
// and the property is not set, but the attribute is (it serves as a fallback for
// __propertiesQueue).
return this.getAttribute(propertyName)},set:function set(newValue){if(this.delegationTarget){var oldValue=this.delegationTarget[propertyName];this.delegationTarget[propertyName]=newValue;// connect with observer system if available
if("function"===typeof this.triggerObserversFor){this.triggerObserversFor(propertyName,newValue,oldValue)}}else{this.__propertiesQueue[propertyName]=newValue}}})})}/**
       * @private
       */},{key:"__initialAttributeDelegation",value:function __initialAttributeDelegation(){var _this3=this,attributeNames=this.delegations.attributes;attributeNames.forEach(function(attributeName){var attributeValue=_this3.getAttribute(attributeName);if("string"===typeof attributeValue){_this3.delegationTarget.setAttribute(attributeName,attributeValue);babelHelpers.get(babelHelpers.getPrototypeOf(DelegateMixin.prototype),"removeAttribute",_this3).call(_this3,attributeName)}})}/**
       * @private
       */},{key:"__emptyEventListenerQueue",value:function __emptyEventListenerQueue(){var _this4=this;this.__eventsQueue.forEach(function(ev){var _this4$delegationTarg;(_this4$delegationTarg=_this4.delegationTarget).addEventListener.apply(_this4$delegationTarg,[ev.type].concat(babelHelpers.toConsumableArray(ev.args)))})}/**
       * @private
       */},{key:"__emptyPropertiesQueue",value:function __emptyPropertiesQueue(){var _this5=this;Object.keys(this.__propertiesQueue).forEach(function(propName){_this5.delegationTarget[propName]=_this5.__propertiesQueue[propName]})}},{key:"delegations",get:function get(){return{target:null,events:[],methods:[],properties:[],attributes:[]}}}]);return DelegateMixin}(superclass))});_exports.DelegateMixin=DelegateMixin});